<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>Curio — Ask or Show</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --rail-width: 360px;
      --rail-gap: 28px;
      --module-max: 950px;
      --bg:#ece6d7;
      --ink:#1b1f1a;
      --muted:#6d726a;
      --brand:#ff5a2e;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(#0000 1px, var(--bg) 1px) 0 0/18px 18px;
      line-height:1.45;
    }
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter:saturate(120%) blur(6px);
      background:linear-gradient(180deg, rgba(236,230,215,.9), rgba(236,230,215,.75));
      border-bottom:1px solid rgba(0,0,0,.06);
    }
    .bar{
      max-width: min(1200px, 100vw - 32px);
      margin: 10px auto;
      display:flex; align-items:center; gap:14px;
    }
    .logo{font-weight:800; letter-spacing:.12em; margin-right:8px}
    .input-wrap{
      position:relative;
      flex:1;
      border-radius:28px; background:#fff;
      box-shadow:0 10px 30px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.8);
      padding:8px 18px 8px 18px;
      display:flex; align-items:center; gap:10px;
    }
    #prompt{
      flex:1; border:0; outline:0; background:transparent;
      font-size:18px; padding:10px 2px;
    }
    .send{
      border:0; border-radius:22px; width:44px; height:44px;
      background:var(--brand); color:#fff; font-weight:800;
      display:grid; place-items:center; cursor:pointer;
      box-shadow:0 6px 18px rgba(255,90,46,.35);
    }

    /* layout */
    .wrap{
      max-width:min(1400px, 100vw - 32px);
      margin: 14px auto 80px auto;
      display:grid;
      grid-template-columns: 1fr var(--rail-width);
      grid-column-gap: var(--rail-gap);
    }
    .modules{
      min-height: 40vh;
    }

    /* chat rail */
    .rail{position:sticky; top:80px; height:max-content; display:flex; flex-direction:column; gap:16px}
    .msg{
      background:#fff; border-radius:16px;
      box-shadow:0 18px 40px rgba(0,0,0,.08);
      border:1px solid rgba(0,0,0,.06);
      padding:14px 16px;
      max-height: 320px; overflow:auto;
    }
    .msg h4{margin:0 0 6px 0; font-size:15px}
    .msg .you{color:#2a342d; font-weight:700}
    .msg .ai{color:#2a342d; font-weight:700}
    .chip{display:inline-block; border-radius:999px; padding:2px 10px; background:#eef0eb; color:#2f342f; font-size:12px}

    /* modules (website blocks) */
    .mod{
      background:#fff; border-radius:20px;
      border:1px solid rgba(0,0,0,.06);
      box-shadow:0 20px 50px rgba(0,0,0,.08);
      overflow:hidden; margin:18px 0;
      max-width: var(--module-max);
    }
    .mod.pad{padding:26px}
    .mod h3{margin:0 0 10px 0}
    .hero{padding:40px}
    .hero h1{font-size: clamp(28px, 3.6vw, 48px); margin:0 0 10px}
    .hero p{color:var(--muted); margin:0}
    .pricing{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px}
    .card{border:1px solid rgba(0,0,0,.06); border-radius:16px; padding:18px}
    .card h4{margin:0 0 8px}
    .contact{display:grid; gap:10px}
    .contact input,.contact textarea{
      width:100%; border:1px solid rgba(0,0,0,.12); border-radius:12px; padding:12px 14px; font:inherit;
      background:#fafaf8;
    }
    .btn{background:var(--ink); color:#fff; border:0; padding:12px 16px; border-radius:12px; cursor:pointer}
    .gallery{
      position:relative; height:420px; display:grid; place-items:center;
      background:linear-gradient(135deg,#ffd6a4,#f7a27b);
    }
    .slide{position:absolute; inset:0; display:grid; place-items:center; color:#2a2a2a; font-weight:800; font-size:clamp(18px,2.6vw,34px)}
    .g-nav{position:absolute; top:50%; transform:translateY(-50%); width:44px; height:44px; border-radius:999px; border:0; background:#fff; box-shadow:0 10px 20px rgba(0,0,0,.12); cursor:pointer}
    .g-prev{left:10px} .g-next{right:10px}
    .cap{position:absolute; left:14px; bottom:10px; font-weight:700}

    /* Primer */
    .primer-surface{
      position:fixed; inset:0; display:grid; place-items:center;
      background:rgba(0,0,0,.25); opacity:0; pointer-events:none; transition:.25s ease;
    }
    .primer-surface.active{opacity:1; pointer-events:auto}
    .primer{
      width:min(900px, 92vw); background:#fff; border-radius:18px; padding:26px 26px 28px;
      box-shadow:0 50px 120px rgba(0,0,0,.25);
    }
    .primer .close{position:absolute; right:18px; top:18px; border:0; background:#0000; font-size:22px; cursor:pointer}
    .primer h1{margin:.3rem 0 1rem 0}
    .primer p{margin:.5rem 0}
    .divider{border:0; height:1px; background:rgba(0,0,0,.08); margin:16px 0}
    .dict-entry{display:flex; gap:10px; align-items:baseline; color:#3b4038}
    .dict-term{font-weight:800}
    .small{font-weight:600; opacity:.7}
    .hl{background:linear-gradient(180deg, #fff39c, #ffd787); padding:.05em .35em; border-radius:6px}
    .accent{font-weight:800}
  </style>
</head>
<body>

  <header>
    <div class="bar">
      <div class="logo">CURIO</div>
      <div class="input-wrap" style="flex:1">
        <input id="prompt" autocomplete="off"
               placeholder="Ask anything… or say ‘show me Curio’s work’ / ‘contact form’ / ‘testimonials’"
        />
        <button class="send" id="sendBtn">→</button>
      </div>
    </div>
  </header>

  <div class="wrap">
    <main class="modules" id="modules"></main>

    <aside class="rail" id="rail">
      <!-- chat tiles render here -->
    </aside>
  </div>

  <!-- Primer (open by default) -->
  <div id="primerSurface" class="primer-surface active" role="dialog" aria-modal="true" aria-label="Curio Primer">
    <article class="primer">
      <button class="close" id="closePrimer" title="Close" type="button">×</button>
      <h1 class="title">Curio is the future of interacting with information</h1>
      <div class="dict-entry"><div class="dict-term">cu·ri·o <span class="small">— verb</span></div><div class="dict-ipa">/ˈkyo͝orēō/</div></div>
      <p>This is an experiment to multiply human potential through intelligent systems.</p>
      <p><span class="accent">Curio is a <span class="hl">mindset</span>, a <span class="hl">method</span>, a <span class="hl">multiplier</span>.</span></p>
      <p>Are you AI curious, wonder how it can help?<br/>An AI Searcher, using AI like Google?<br/>Or AI Savvy looking for where we are headed?</p>
      <p><strong>Ask me how I can help you.</strong></p>
      <hr class="divider"/>
      <h2 class="title" style="font-size:clamp(1.4rem,3vw,2rem);">Why this Matters: This is Not Your Father’s Internet.</h2>
      <p>This isn’t a static website—it’s a window to the future. Behind that blinking cursor: compressed hours of work waiting to be shaped.</p>
      <p><strong>Ask it anything—and watch what you can become.</strong></p>
      <h3 class="title" style="font-size:clamp(1.15rem,2.4vw,1.6rem); margin-top:1rem;">Try asking:</h3>
      <ul><li>“Show me Curio’s work.”</li><li>“Contact form.”</li><li>“Testimonials.”</li><li>“What is Curio?”</li></ul>
    </article>
  </div>

  <script>
    // ========= Config =========
    // OpenAI: served by your Netlify Function — NO key in the browser.
    window.CURIO_OPENAI_ENDPOINT = '/.netlify/functions/openai-chat';

    // Pexels: client-side (okay per your decision)
    const PEXELS_KEY = 'PASTE_YOUR_PEXELS_API_KEY_HERE';
    const PEXELS_COLLECTION_ID = '5mz4odgok'; // your collection id

    // ========= Small helpers =========
    const el = sel => document.querySelector(sel);
    const modules = el('#modules');
    const rail = el('#rail');

    // Primer open by default
    el('#closePrimer').addEventListener('click', () => el('#primerSurface').classList.remove('active'));

    // Input events
    el('#sendBtn').addEventListener('click', submitPrompt);
    el('#prompt').addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); submitPrompt(); }
    });

    async function submitPrompt(){
      const text = el('#prompt').value.trim();
      if(!text) return;
      addYouTile(text);
      el('#prompt').value = '';

      const mode = classify(text);
      if(mode.type === 'gallery') return renderGallery(mode);
      if(mode.type === 'contact') return renderContact();
      if(mode.type === 'testimonials') return renderTestimonials();
      if(mode.type === 'pricing') return renderPricing();
      if(mode.type === 'hero') return renderHero(mode);
      // default → normal chat
      await renderChatAnswer(text);
    }

    function addYouTile(text){
      const box = document.createElement('div');
      box.className = 'msg';
      box.innerHTML = `
        <h4><span class="you">You</span> — ${escapeHtml(text)}</h4>
        <div class="chip">Thinking…</div>`;
      rail.prepend(box);
      setTimeout(()=> box.querySelector('.chip')?.remove(), 800); // remove "Thinking…" after a moment
    }

    function addAiTile(html){
      const box = document.createElement('div');
      box.className = 'msg';
      box.innerHTML = `<h4 class="ai">Curio</h4><div>${html}</div>`;
      rail.prepend(box);
    }

    function escapeHtml(s){return s.replace(/[&<>"']/g,m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;' }[m]))}

    // ========= Classifier (very lightweight) =========
    function classify(text){
      const t = text.toLowerCase();
      if (/(show|gallery|work|portfolio)/.test(t)) return { type:'gallery', query:text };
      if (/(contact|reach|email|form)/.test(t)) return { type:'contact' };
      if (/(testimonials|reviews|social proof)/.test(t)) return { type:'testimonials' };
      if (/(pricing|packages|tiers|cost)/.test(t)) return { type:'pricing' };
      if (/(hero|landing|headline|bullet points)/.test(t)) return { type:'hero', query:text };
      return { type:'chat' };
    }

    // ========= Chat via Netlify function =========
    async function renderChatAnswer(promptText){
      try{
        const res = await fetch(window.CURIO_OPENAI_ENDPOINT, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ messages: [{ role:'user', content: promptText }] })
        });
        if(!res.ok){
          const msg = await res.text();
          addAiTile(`<div style="color:#9b3122;">Server error: ${escapeHtml(msg)}</div>`);
          return;
        }
        const data = await res.json();
        addAiTile(markdownToHtml(data.reply || ''));
      }catch(err){
        addAiTile(`<div style="color:#9b3122;">Network error: ${escapeHtml(err.message)}</div>`);
      }
    }

    // ========= Modules (website blocks) =========
    function renderHero(mode){
      const mod = document.createElement('section');
      mod.className = 'mod hero';
      mod.innerHTML = `
        <h1>Curio is an AI boost — a multiplier.</h1>
        <p>Not an agency. A lab that helps you think faster and build smarter.</p>`;
      modules.prepend(mod);
      window.scrollTo({ top: mod.getBoundingClientRect().top + window.scrollY - 90, behavior:'smooth' });
    }

    function renderPricing(){
      const mod = document.createElement('section');
      mod.className = 'mod pad';
      mod.innerHTML = `
        <h3>Pricing</h3>
        <div class="pricing">
          <div class="card">
            <h4>AI Curious — $1000</h4>
            <p>1-hour Lunch & Learn. Myths busted. Leave energized.</p>
          </div>
          <div class="card">
            <h4>AI Searcher — $2500</h4>
            <p>Strategic session(s) + two custom artifacts.</p>
          </div>
          <div class="card">
            <h4>AI User — $5000+</h4>
            <p>Sprint or prototyping: workflow architecture + prompt systems.</p>
          </div>
        </div>`;
      modules.prepend(mod);
      window.scrollTo({ top: mod.offsetTop - 90, behavior:'smooth' });
    }

    function renderContact(){
      const mod = document.createElement('section');
      mod.className = 'mod pad';
      mod.innerHTML = `
        <h3>Contact</h3>
        <form class="contact" onsubmit="event.preventDefault(); alert('Thanks — sent!');">
          <input required placeholder="Name"/>
          <input required type="email" placeholder="Email"/>
          <textarea rows="4" placeholder="What are you exploring with AI?"></textarea>
          <button class="btn">Send</button>
        </form>`;
      modules.prepend(mod);
      window.scrollTo({ top: mod.offsetTop - 90, behavior:'smooth' });
    }

    function renderTestimonials(){
      const mod = document.createElement('section');
      mod.className = 'mod pad';
      mod.innerHTML = `
        <h3>Testimonials</h3>
        <div class="card"><strong>Director, Innovation</strong><br/>“One afternoon with Curio replaced a month of back-and-forth.”</div>
        <div class="card" style="margin-top:10px;"><strong>Founder</strong><br/>“We shipped a concept in days. The prompts alone were worth it.”</div>`;
      modules.prepend(mod);
      window.scrollTo({ top: mod.offsetTop - 90, behavior:'smooth' });
    }

    // ---- Gallery (Pexels collection, with graceful fallback) ----
    async function renderGallery(mode){
      const mod = document.createElement('section');
      mod.className = 'mod';
      mod.innerHTML = `
        <div class="gallery" id="gal">
          <div class="slide" id="slide">Loading gallery…</div>
          <button class="g-nav g-prev" aria-label="Previous">‹</button>
          <button class="g-nav g-next" aria-label="Next">›</button>
          <div class="cap" id="cap"></div>
        </div>`;
      modules.prepend(mod);

      let items = [];
      try{
        if(!PEXELS_KEY) throw new Error('Missing PEXELS_KEY');
        const r = await fetch(`https://api.pexels.com/v1/collections/${encodeURIComponent(PEXELS_COLLECTION_ID)}?type=photos&per_page=10`, {
          headers:{ Authorization: PEXELS_KEY }
        });
        const data = await r.json();
        const arr = data.photos || data.media || [];
        items = arr.map((p,i)=>({
          src: p?.src?.large2x || p?.src?.large || p?.src?.medium,
          caption: p?.alt || p?.photographer || `Image ${i+1}`
        })).filter(x=>!!x.src);
      }catch(e){
        // fallback to generated placeholders
        items = Array.from({length:5}, (_,i)=>({
          src: '', caption: `Curio Work ${i+1}`, placeholder:true
        }));
      }

      initCarousel(el('#gal'), items);
      window.scrollTo({ top: mod.offsetTop - 90, behavior:'smooth' });
    }

    function initCarousel(root, items){
      const slide = root.querySelector('#slide');
      const cap = root.querySelector('#cap');
      let idx = 0;

      function render(){
        const it = items[idx];
        if(it.placeholder){
          slide.style.background = 'linear-gradient(135deg,#ffd6a4,#f7a27b)';
          slide.style.backgroundSize = 'cover';
          slide.innerHTML = `<div>${escapeHtml(it.caption)}</div>`;
        }else{
          slide.style.background = `center/cover url(${it.src})`;
          slide.innerHTML = '';
        }
        cap.textContent = it.caption || '';
      }
      root.querySelector('.g-prev').onclick = ()=>{ idx = (idx - 1 + items.length) % items.length; render(); };
      root.querySelector('.g-next').onclick = ()=>{ idx = (idx + 1) % items.length; render(); };
      render();
    }

    // ========= tiny md → html (bold/italic/lines only) =========
    function markdownToHtml(md){
      return md
        .replace(/^### (.*$)/gim, '<h4>$1</h4>')
        .replace(/^## (.*$)/gim, '<h3>$1</h3>')
        .replace(/^# (.*$)/gim, '<h2>$1</h2>')
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\*(.*?)\*/g, '<em>$1</em>')
        .replace(/\n/g, '<br/>');
    }
  </script>
</body>
</html>
